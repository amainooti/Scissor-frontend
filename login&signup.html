<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
</head>
<body class="body">
    <main class="main login-body">
        <div class="container" id="container">
            <div class="form-container sign-up-container">
                <form action="#" class="sign-up-form" onsubmit="handleSubmit(event)">
                    <input class="username" name="username" type="text" placeholder="Username" required />
                    <small id="alert-username"></small>
                    <input class="email" name="email" type="email" placeholder="Email" required />
                    <small id="alert-email"></small>
                    <input class="firstName" name="firstName" type="text" placeholder="Firstname" required />
                    <small id="alert-firstname"></small>
                    <input class="lastName" name="lastName" type="text" placeholder="Lastname" required />
                    <small id="alert-lastname"></small>
                    <input class="password" name="password" type="password" placeholder="Password" required />
                    <small id="alert-password"></small>
                    <input class="confirmPassword" name="confirmPassword" type="password" placeholder="Confirm Password"
                        required />
                    <small id="alert-confirm-password"></small>
                    <button type="submit">Sign Up</button>
                </form>
            </div>
            <div class="form-container sign-in-container">
                <form action="#">
                    <h1>Login</h1>
                    <input type="email" placeholder="Email" />
                    <input type="password" placeholder="Password" />
                    <a href="request-reset.html">Forgot your password?</a>
                    <button>Sign In</button>
                </form>
            </div>
            <div class="overlay-container">
                <div class="overlay">
                    <div class="overlay-panel overlay-left">
                        <h1>Welcome Back!</h1>
                        <p>To stay in touch with us, please log in using your personal credentials</p>
                        <button class="ghost" id="signIn">Sign In</button>
                    </div>
                    <div class="overlay-panel overlay-right">
                        <h1>Hello!</h1>
                        <p>Enter your personal information and start a journey with us</p>
                        <button class="ghost" id="signUp">Sign Up</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const signUpButton = document.getElementById("signUp");
        const signInButton = document.getElementById("signIn");
        const container = document.getElementById("container");
        const signUpformContainer = document.querySelector(".form-container");
        const api = "https://scissor-g3ga.onrender.com/";

        signUpButton.addEventListener("click", () => {
            container.classList.add("right-panel-active");
        });

        signInButton.addEventListener("click", () => {
            container.classList.remove("right-panel-active");
        });

        function handleSubmit(event) {
            event.preventDefault();
            const usernameCheck = document.querySelector("#alert-username")
            const passwordMatch = document.querySelector('#alert-confirm-password');
            const userName = document.querySelector(".username").value;
            const firstName = document.querySelector(".firstName").value;
            const lastName = document.querySelector(".lastName").value;
            const password = document.querySelector(".password").value;
            const email = document.querySelector(".email").value;

            // Validate password confirmation
            const confirmPassword = document.querySelector(".confirmPassword").value;
            if (password !== confirmPassword) {
                // Throw error passwords don't match
                passwordMatch.innerHTML = "Passwords Don't match";
                setTimeout(() => {
                    passwordMatch.innerHTML = "";
                }, 4000);
                return;
            }

            // Throw error passwords don't match


            const data = {
                username: userName,
                first_name: firstName,
                last_name: lastName,
                password: password,
                email: email,
            };

            fetch(api + "/signup", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            })
                .then(response => {
                    if (response.ok) {
                        // Handle success
                        console.log("Sign up successful");
                    } else {
                        // Handle error
                        console.error("Sign up failed");
                    }
                })
                .catch(error => {
                    console.error(error);
                });
        }
    </script>

    <div class="down-arrow">
        <h1>up</h1>
    </div>
    <section class="one"></section>
    <section class="two"></section>
    <section class="three"></section>

    <script src="index.js"></script>
</body>
</html>
